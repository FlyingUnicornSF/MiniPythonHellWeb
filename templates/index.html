<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href={{ url_for('static', filename='style.css') }}>
</head>
<body>
    <nav>
        <select name="organize-by" id="organizeBy-select">
            {% for option in options %}
            <option value="{{ option }}">{{ option }}</option>  
            {% endfor %}
        </select>
    </nav>

    <!-- <div id="block">
        {% block app_container %}{% endblock app_container %}
    </div> -->
    <div id='app-organized-list-container'>
        {% for item, app_list in organized_list.items() %}
            <div id="app-list-container">
                <h1>{{ item }}</h1>
                {% for app in app_list %}
                <div>
                    {{ app|pprint }}
                    <a href="https://narrative.kbase.us/#catalog/apps/{{ app.id }}">
                        {% if app.icon %}
                        <img class="icon-img" src="https://kbase.us/services/narrative_method_store/{{ app.icon.url }}" >
                        {% else %} 
                        <img class="icon-img" src=https://d1nhio0ox7pgb.cloudfront.net/_img/g_collection_png/standard/256x256/question.png><br>
                        {% endif %} 
                    </a>
                    <p>Name: {{ app.name }} </p>
                    <p>Module Name: {{ app.module_name }}</p>
                    <p>Categories Name: {{ app.categories }}</p>
                </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
    <!-- <div>    
    {% for item in resp_json %}
        <div><a href="https://narrative.kbase.us/#catalog/apps/{{ item.id }}">
            {% if item.icon %}
            <img clas="icon-img" src="https://kbase.us/services/narrative_method_store/{{ item.icon.url }}" >
            {% else %} 
            <img clas="icon-img" src=https://d1nhio0ox7pgb.cloudfront.net/_img/g_collection_png/standard/256x256/question.png><br>
            {% endif %} 
            Name: {{ item.name }}, Module Name: {{ item.module_name }} 
            </a>
        </div>
    {% endfor %}  
    </div> -->
    <script>
        let dropdown = document.querySelector('#organizeBy-select');
        document.addEventListener('DOMContentLoaded',function() {
            document.querySelector('select[name="organize-by"]').onchange=changeEventHandler;
        },false);
        
        function changeEventHandler(event) {
            if(!event.target.value) alert('Please Select One');
            else window.location.search = '?organize_by='+event.target.value;
        }
    </script>
</body>
</html>